#!/bin/bash


# âœ¨ Clean Node.js Project âœ¨
CLEAN_NODEJS="rimraf package-lock.json node_modules dist .turbo"
function cleanRootNodejs() {
  echo "ğŸ—‘ï¸  Cleaning root nodejs generated files... â³"
  $CLEAN_NODEJS
  echo "ğŸ—‘ï¸  Cleaning root nodejs generated files completed âœ…"
}
function cleanNodeJsTools() {
  echo "ğŸ—‘ï¸  Cleaning nodejs-tools generated files... â³"
  cd nodejs-tools && npm exec --include-workspace-root --workspaces -- $CLEAN_NODEJS
  echo "ğŸ—‘ï¸  Cleaning nodejs-tools generated files completed âœ…"
}
function cleanNodeJs() {
  echo "ğŸ—‘ï¸  Cleaning all nodejs generated files... â³"
  cleanRootNodejs
  cleanNodeJsTools
  echo "ğŸ—‘ï¸  Cleaning all nodejs generated files completed âœ…"
}


# âœ¨ Update NodeJs packages âœ¨
function packageUpdateNodejsTools() {
  echo "ğŸ—‘ï¸  Updating nodejs-tools packages... â³"
  ./node_modules/.bin/ncu -u --cwd=./nodejs-tools/ --ws --root
  echo "ğŸ—‘ï¸  Updating nodejs-tools packages completed âœ…"
}
function packageUpdateRootNodeJs() {
  echo "ğŸ—‘ï¸  Updating root nodejs packages... â³"
  ./node_modules/.bin/ncu -u
  echo "ğŸ—‘ï¸  Updating root nodejs packages completed âœ…"
}
function packageUpdateNodeJs() {
  echo "ğŸ—‘ï¸  Updating all nodejs packages... â³"
  packageUpdateRootNodeJs
  packageUpdateNodejsTools
  echo "ğŸ—‘ï¸  Updating all nodejs packages completed âœ…"
}

# Execute the function name provided to the script as the first argument
$1
