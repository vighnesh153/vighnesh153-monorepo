#!/bin/bash


# ✨ Clean Node.js Project ✨
CLEAN_NODEJS="rimraf package-lock.json node_modules dist .turbo"
function cleanRootNodejs() {
  echo "🗑️  Cleaning root nodejs generated files... ⏳"
  $CLEAN_NODEJS
  echo "🗑️  Cleaning root nodejs generated files completed ✅"
}
function cleanNodeJsTools() {
  echo "🗑️  Cleaning nodejs-tools generated files... ⏳"
  cd nodejs-tools && npm exec --include-workspace-root --workspaces -- $CLEAN_NODEJS
  echo "🗑️  Cleaning nodejs-tools generated files completed ✅"
}
function cleanNodeJs() {
  echo "🗑️  Cleaning all nodejs generated files... ⏳"
  cleanRootNodejs
  cleanNodeJsTools
  echo "🗑️  Cleaning all nodejs generated files completed ✅"
}


# ✨ Update NodeJs packages ✨
function packageUpdateNodejsTools() {
  echo "🗑️  Updating nodejs-tools packages... ⏳"
  ./node_modules/.bin/ncu -u --cwd=./nodejs-tools/ --ws --root
  echo "🗑️  Updating nodejs-tools packages completed ✅"
}
function packageUpdateRootNodeJs() {
  echo "🗑️  Updating root nodejs packages... ⏳"
  ./node_modules/.bin/ncu -u
  echo "🗑️  Updating root nodejs packages completed ✅"
}
function packageUpdateNodeJs() {
  echo "🗑️  Updating all nodejs packages... ⏳"
  packageUpdateRootNodeJs
  packageUpdateNodejsTools
  echo "🗑️  Updating all nodejs packages completed ✅"
}

# Execute the function name provided to the script as the first argument
$1
